<style>
    #chatting{
        width: 100%;
        height: 100%;
        border-top: 5px solid rgba(255, 0, 44, 1);       
        border-right: 1px solid rgba(53,53, 53, 1);       
        background-color: rgba(255, 244, 244, 1);
        display: flex;
        flex-direction: column;
    }
    #chattingLog{
        flex: 1;
        padding-left: 15px;
        padding-top: 15px;
        overflow-y: auto;
    }
    #chatSend{
        width: 100%;
        height: 10%;
    }
</style>
<div id="chatting">
    <div id="chattingLog"></div>
    <script>
        const chattingLog_parent = document.getElementById('chattingLog');
        let chattingBuffer = [];

        function sendChatting(){
            if (event.keyCode == 13){
                const target = document.getElementById("chatSend");
                if (target.value.length != 0){
                    chattingBuffer.push(target.value);
                    target.value = '';
                }
            }
        }
        serverInterval('/user/hear','POST',(res)=>{
            if (chattingBuffer.length != 0){
                fetch('/user/say',{
                        'method':'POST',
                        'headers':{
                            'Content-Type' : 'application/json',
                        },
                        'body':  JSON.stringify({
                            "data": chattingBuffer.slice()
                        })
                    });
                chattingBuffer = [];
            }
            res.chatbuf.forEach((chat)=>{
                let newchatline = document.createElement("div");
                newchatline.style.fontSize = '20px';
                newchatline.style.wordWrap = 'break-word';
                newchatline.innerText = `   ${chat.user} : ${chat.text}`;
                chattingLog_parent.appendChild(newchatline);
            })
        }, null, 100)
    </script>
    <input id="chatSend" type="text" value='' onkeydown="sendChatting();">
</div>